{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport UserUpdate from \"@/components/adm/UserUpdate.vue\";\nexport default {\n  mounted: function mounted() {\n    this.getAllUser();\n  },\n  data: function data() {\n    return {\n      alluser: [],\n      page: null,\n      paginate: [],\n      paginates: {},\n      seach: \"\",\n      total: \"\",\n      deleteMessage: \"\",\n      selected: \"\",\n      ed: false\n    };\n  },\n  components: {\n    UserUpdate: UserUpdate\n  },\n  // computed: {\n  //   searchUser() {\n  //     return this.alluser.filter(\n  //       (user) =>\n  //         user.name.toLowerCase().includes(this.seach.toLowerCase()) ||\n  //         user.email.toLowerCase().includes(this.seach.toLowerCase())\n  //     );\n  //   },\n  // },\n  watch: {\n    seach: {\n      handler: function handler(newValue) {\n        var _this = this;\n\n        if (newValue == \"\") {\n          this.getAllUser();\n        } else {\n          var url = \"https://les2ms-api.herokuapp.com/api/mngusers/search/\" + newValue;\n          var requestOptions = {\n            method: \"GET\",\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Bearer \" + this.$store.state.token\n            }\n          };\n          fetch(url, requestOptions).then(function (response) {\n            return response.json();\n          }).then(function (result) {\n            _this.alluser = result.data;\n            _this.page = result.last_page;\n            _this.total = result.total;\n\n            _this.pagination();\n          })[\"catch\"](function (errors) {\n            console.log(errors);\n          });\n        }\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n  methods: {\n    closeEditModal: function closeEditModal() {\n      this.ed = !this.ed;\n    },\n    getAll: function getAll(page) {\n      var _this2 = this;\n\n      var url = \"https://les2ms-api.herokuapp.com/api/mngusers?page=\" + page;\n      var requestOptions = {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + this.$store.state.token\n        }\n      };\n      fetch(url, requestOptions).then(function (response) {\n        return response.json();\n      }).then(function (result) {\n        _this2.alluser = result.data;\n        _this2.page = result.last_page;\n\n        _this2.pagination();\n      })[\"catch\"](function (errors) {\n        console.log(errors);\n      });\n    },\n    getAllUser: function getAllUser() {\n      var _this3 = this;\n\n      var url = \"https://les2ms-api.herokuapp.com/api/mngusers\";\n      var requestOptions = {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + this.$store.state.token\n        }\n      };\n      fetch(url, requestOptions).then(function (response) {\n        return response.json();\n      }).then(function (result) {\n        _this3.alluser = result.data;\n        _this3.page = result.last_page;\n        _this3.total = result.total;\n\n        _this3.pagination();\n      })[\"catch\"](function (errors) {\n        console.log(errors);\n      });\n    },\n    pagination: function pagination() {\n      if (this.page != null) {\n        this.paginate = [];\n\n        for (var i = 1; i <= this.page; i++) {\n          this.paginate[i - 1] = i;\n        }\n\n        this.paginates = {};\n        this.paginates = Object.assign({}, this.paginate);\n      }\n    },\n    deleteUser: function deleteUser(UserId) {\n      var _this4 = this;\n\n      var url = \"https://les2ms-api.herokuapp.com/api/mngusers/\" + UserId;\n      var requestOptions = {\n        method: \"DELETE\",\n        headers: {\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + this.$store.state.token\n        }\n      };\n      fetch(url, requestOptions).then(function (response) {\n        return response.json();\n      }).then(function (result) {\n        if (result.message) {\n          _this4.deleteMessage = result.message;\n          location.reload();\n        }\n      })[\"catch\"](function (errors) {\n        console.log(errors);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["UserUpdate","mounted","getAllUser","data","alluser","page","paginate","paginates","seach","total","deleteMessage","selected","ed","components","watch","handler","newValue","url","requestOptions","method","headers","Accept","Authorization","$store","state","token","fetch","then","response","json","result","last_page","pagination","errors","console","log","immediate","deep","methods","closeEditModal","getAll","i","Object","assign","deleteUser","UserId","message","location","reload"],"sourceRoot":"","sources":["/home/bignon/Documents/2MS/projet-formation/2ms/src/components/adm/AllUser.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"main\">\n      <div class=\"title\">Utilisateurs</div>\n      <div class=\"table-card\">\n        <div class=\"tools\">\n          <div class=\"filter\">\n            filtres\n            <select v-model=\"selected\" class=\"editor-select\">\n              <option value=\"\">Pays</option>\n              <option\n                v-for=\"contry in $store.state.contries\"\n                :key=\"contry.id\"\n                :value=\"contry.name\"\n              >\n                {{ contry.name }}\n              </option>\n              <option value=\"\">Pays</option>\n            </select>\n            <div style=\"display: flex; gap: 1em\">\n              <img\n                src=\"@/assets/sort.svg\"\n                alt=\"\"\n                style=\"cursor: pointer\"\n                @click=\"reverseTable('normal'\"\n              />\n              <img\n                src=\"@/assets/sort.svg\"\n                alt=\"\"\n                style=\"cursor: pointer; transform: rotate(180deg)\"\n                @click=\"reverseTable('inverse')\"\n              />\n            </div>\n          </div>\n          <div class=\"search\">\n            <input type=\"search\" placeholder=\"Recherche\" v-model=\"seach\" />\n          </div>\n        </div>\n        <div class=\"table-container\">\n          <table>\n            <tr>\n              <th>Id</th>\n              <th>name</th>\n              <th>email</th>\n              <th>Eglise</th>\n              <th>Pays</th>\n              <th>telephone</th>\n              <th>Date de naissance</th>\n              <th>Role</th>\n              <th>ACTION</th>\n            </tr>\n\n            <div v-if=\"alluser.length == 0\" class=\"no-re\">Aucun resultats</div>\n            <tr v-for=\"user in alluser\" :key=\"user\">\n              <td>{{ user.id }}</td>\n              <td>{{ user.name }}</td>\n              <td>{{ user.email }}</td>\n              <td>{{ user.eglise }}</td>\n              <td>{{ user.country }}</td>\n              <td>{{ user.phone_number }}</td>\n              <td>{{ user.dates }}</td>\n              <td>{{ user.role.role }}</td>\n              <td>\n                <div class=\"user-action\">\n                  <button class=\"edit\" @click=\"ed = true\">\n                    <img src=\"../../assets/edit.svg\" alt=\"edit\" />\n                  </button>\n                  <button class=\"delete\" @click=\"deleteUser(user.id)\">\n                    <img src=\"../../assets/delete.svg\" alt=\"edit\" />\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </table>\n        </div>\n        <div class=\"table-footer\">\n          <div class=\"total\">Total : {{ this.total }}</div>\n          <div class=\"pagination\">\n            <ul class=\"paginaton-card\">\n              <li\n                v-for=\"pages in paginates\"\n                :key=\"pages\"\n                @click=\"getAll(pages)\"\n              >\n                {{ pages }}\n              </li>\n              <li>suivant</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <UserUpdate :ed=\"ed\" :closeEditModal=\"closeEditModal\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserUpdate from \"@/components/adm/UserUpdate.vue\";\nexport default {\n  mounted() {\n    this.getAllUser();\n  },\n  data() {\n    return {\n      alluser: [],\n      page: null,\n      paginate: [],\n      paginates: {},\n      seach: \"\",\n      total: \"\",\n      deleteMessage: \"\",\n      selected: \"\",\n      ed: false,\n    };\n  },\n  components: {\n    UserUpdate,\n  },\n  // computed: {\n  //   searchUser() {\n  //     return this.alluser.filter(\n  //       (user) =>\n  //         user.name.toLowerCase().includes(this.seach.toLowerCase()) ||\n  //         user.email.toLowerCase().includes(this.seach.toLowerCase())\n  //     );\n  //   },\n  // },\n  watch: {\n    seach: {\n      handler(newValue) {\n        if (newValue == \"\") {\n          this.getAllUser();\n        } else {\n          const url =\n            \"https://les2ms-api.herokuapp.com/api/mngusers/search/\" + newValue;\n          let requestOptions = {\n            method: \"GET\",\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Bearer \" + this.$store.state.token,\n            },\n          };\n          fetch(url, requestOptions)\n            .then((response) => {\n              return response.json();\n            })\n            .then((result) => {\n              this.alluser = result.data;\n              this.page = result.last_page;\n              this.total = result.total;\n              this.pagination();\n            })\n            .catch((errors) => {\n              console.log(errors);\n            });\n        }\n      },\n      immediate: true,\n      deep: true,\n    },\n  },\n\n  methods: {\n    closeEditModal() {\n      this.ed = !this.ed;\n    },\n    getAll(page) {\n      const url = \"https://les2ms-api.herokuapp.com/api/mngusers?page=\" + page;\n      let requestOptions = {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + this.$store.state.token,\n        },\n      };\n      fetch(url, requestOptions)\n        .then((response) => {\n          return response.json();\n        })\n        .then((result) => {\n          this.alluser = result.data;\n          this.page = result.last_page;\n          this.pagination();\n        })\n        .catch((errors) => {\n          console.log(errors);\n        });\n    },\n    getAllUser() {\n      const url = \"https://les2ms-api.herokuapp.com/api/mngusers\";\n      let requestOptions = {\n        method: \"GET\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + this.$store.state.token,\n        },\n      };\n      fetch(url, requestOptions)\n        .then((response) => {\n          return response.json();\n        })\n        .then((result) => {\n          this.alluser = result.data;\n          this.page = result.last_page;\n          this.total = result.total;\n          this.pagination();\n        })\n        .catch((errors) => {\n          console.log(errors);\n        });\n    },\n    pagination() {\n      if (this.page != null) {\n        this.paginate = [];\n        for (var i = 1; i <= this.page; i++) {\n          this.paginate[i - 1] = i;\n        }\n        this.paginates = {};\n        this.paginates = Object.assign({}, this.paginate);\n      }\n    },\n    deleteUser(UserId) {\n      const url = \"https://les2ms-api.herokuapp.com/api/mngusers/\" + UserId;\n      let requestOptions = {\n        method: \"DELETE\",\n        headers: {\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + this.$store.state.token,\n        },\n      };\n      fetch(url, requestOptions)\n        .then((response) => {\n          return response.json();\n        })\n        .then((result) => {\n          if (result.message) {\n            this.deleteMessage = result.message;\n            location.reload();\n          }\n        })\n        .catch((errors) => {\n          console.log(errors);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-family: \"Lucida Sans\", \"Lucida Sans Regular\", \"Lucida Grande\",\n    \"Lucida Sans Unicode\", Geneva, Verdana, sans-serif;\n}\n.no-re {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  text-align: center;\n  height: 3em;\n  font-size: 20px;\n}\n.main {\n  width: 100%;\n  min-height: 100vh;\n  background-color: lightgray;\n  display: flex;\n  flex-direction: column;\n  gap: 1em;\n  padding: 1em 1em;\n  -color: black;\n}\n.title {\n  display: flex;\n  width: 100%;\n  height: 3em;\n  font-size: 20px;\n  font-weight: 700;\n  background-color: white;\n  align-items: center;\n  box-shadow: 0px 0px 2px 1px lightgray;\n  border-radius: 10px;\n  padding: 0px 25px;\n  color: gray;\n}\n\n.table-card {\n  display: flex;\n  width: 100%;\n  align-items: center;\n  flex-direction: column;\n  box-shadow: 0px 0px 2px 1px lightgray;\n  border-radius: 10px;\n  padding: 15px 25px;\n  gap: 16px;\n  color: gray;\n  background-color: white;\n}\n.tools {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n}\n.search input {\n  border: none;\n  background: lightgray;\n  height: 2em;\n  border-radius: 15px;\n  padding: 0px 15px;\n  outline: none;\n  cursor: pointer;\n}\n.filter {\n  display: flex;\n  gap: 1em;\n  align-items: center;\n}\n.filter select {\n  border: none;\n  background: lightgray;\n  height: 2em;\n  border-radius: 15px;\n  padding: 0px 15px;\n  outline: none;\n  cursor: pointer;\n  width: 10em;\n}\n.table-container {\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n}\n\n.table-container table {\n  width: 100%;\n  text-align: center;\n  border-collapse: collapse;\n  border-spacing: 0;\n  font-size: 12px;\n  box-shadow: 0px 0px 10px 0.3px lightgray;\n  border-radius: 7px;\n  overflow: hidden;\n}\n\nth,\ntd {\n  padding: 10px 15px;\n}\nth {\n  background-color: #5b3cc4;\n  color: white;\n  text-transform: uppercase;\n}\n\ntr:nth-child(odd) {\n  background-color: lightgray;\n}\n\n.table-footer {\n  width: 100%;\n  height: 3em;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0px 0px 10px 0.3px lightgray;\n  border-radius: 7px;\n  padding: 0px 15px;\n}\n\n.paginaton-card {\n  height: 100%;\n  display: flex;\n  gap: 15px;\n  padding: 5px 0;\n}\n.paginaton-card li {\n  list-style: none;\n  min-width: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #5b3cc4;\n  transition: 0.5s ease;\n  cursor: pointer;\n  padding: 0 5px;\n  border-radius: 5px;\n  height: 2em;\n}\n.paginaton-card li:hover {\n  background-color: #5b3cc4;\n  color: white;\n}\n.user-action {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 16px;\n}\n.user-action .edit,\n.user-action .delete {\n  border: none;\n  outline: none;\n}\n.user-action .delete {\n  background-color: rgb(242, 19, 93);\n  padding: 5px 10px;\n  color: white;\n  cursor: pointer;\n}\n.user-action .edit {\n  background-color: #5b3cc4;\n  padding: 5px 10px;\n  color: white;\n  cursor: pointer;\n}\n@media screen and (max-width: 798px) {\n  .tools {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n  }\n  .filter {\n    flex-direction: column;\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module"}